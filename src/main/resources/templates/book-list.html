<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book List</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container">

<h1>ğŸ“š KsiÄ…Å¼ki</h1>

<a href="/books" class="btn btn-secondary">Wyszukaj ksiÄ…Å¼ki</a>
<a href="/books/new" class="btn btn-secondary">Dodaj ksiÄ…Å¼ki</a>
<a href="/wyswietl-przedmioty" class="btn btn-secondary">Przedmioty</a>
<a href="/dodaj-przedmiot" class="btn btn-secondary">Dodaj przedmioty</a>

<!-- ğŸ§  Explanation Panel -->
<div class="alert alert-info">
    <h5>ğŸ” Jak to dziaÅ‚a</h5>
    <p>
        Ta strona wypisuje wszystkie ksiÄ…Å¼ki z uÅ¼yciem <code>bookRepository.findAll()</code>. Dane pochodzÄ… z bazy danych H2 dziÄ™ki Spring Data JPA.
        Kiedy filtry sÄ… uÅ¼ywane, dynamiczne kwerendy sÄ… tworzone dziÄ™ki <code>Specification</code> API.
    </p>

    <h5>Jak KorzystaÄ‡ z Filtrowania KsiÄ…Å¼ek</h5>
    <p>
        Na tej stronie masz moÅ¼liwoÅ›Ä‡ filtrowania wyÅ›wietlanej listy ksiÄ…Å¼ek przy uÅ¼yciu prostego formularza wyszukiwania. MoÅ¼esz zawÄ™ziÄ‡ wyniki, podajÄ…c autora lub rok publikacji (lub oba te kryteria jednoczeÅ›nie).
    </p>
    <ul>
        <li>
            <strong>Filtrowanie po autorze:</strong>
            <p>
                W polu oznaczonym jako "Author" moÅ¼esz wpisaÄ‡ fragment nazwiska lub imienia autora, ktÃ³rego ksiÄ…Å¼ki CiÄ™ interesujÄ…. System wyszuka wszystkie ksiÄ…Å¼ki, w ktÃ³rych pole "Author" zawiera wpisany tekst (bez wzglÄ™du na wielkoÅ›Ä‡ liter). Na przykÅ‚ad, wpisujÄ…c "Kowalski", zobaczysz wszystkie ksiÄ…Å¼ki, ktÃ³rych autorem jest ktoÅ›, w ktÃ³rego nazwisku wystÄ™puje "Kowalski".
            </p>
        </li>
        <li>
            <strong>Filtrowanie po roku publikacji:</strong>
            <p>
                W polu oznaczonym jako "Year" moÅ¼esz wpisaÄ‡ rok publikacji, aby wyÅ›wietliÄ‡ tylko te ksiÄ…Å¼ki, ktÃ³re zostaÅ‚y opublikowane w tym roku lub pÃ³Åºniej. Wpisz peÅ‚ny rok (np. "2020").
            </p>
        </li>
        <li>
            <strong>ÅÄ…czenie filtrÃ³w:</strong>
            <p>
                MoÅ¼esz uÅ¼yÄ‡ obu pÃ³l jednoczeÅ›nie, aby jeszcze bardziej zawÄ™ziÄ‡ wyniki wyszukiwania. Na przykÅ‚ad, moÅ¼esz wpisaÄ‡ "Sienkiewicz" w polu "Author" i "1900" w polu "Year", aby znaleÅºÄ‡ wszystkie ksiÄ…Å¼ki Sienkiewicza opublikowane w roku 1900 lub pÃ³Åºniej.
            </p>
        </li>
        <li>
            <strong>Aby zastosowaÄ‡ filtry:</strong>
            <p>
                Po wpisaniu Å¼Ä…danych kryteriÃ³w w odpowiednie pola, kliknij przycisk "Search". Lista ksiÄ…Å¼ek zostanie zaktualizowana, wyÅ›wietlajÄ…c tylko te pozycje, ktÃ³re speÅ‚niajÄ… Twoje kryteria.
            </p>
        </li>
        <li>
            <strong>Aby zobaczyÄ‡ wszystkie ksiÄ…Å¼ki:</strong>
            <p>
                JeÅ›li chcesz ponownie wyÅ›wietliÄ‡ peÅ‚nÄ… listÄ™ wszystkich dostÄ™pnych ksiÄ…Å¼ek, po prostu wyczyÅ›Ä‡ oba pola formularza wyszukiwania (pozostaw je puste) i kliknij "Search".
            </p>
        </li>
    </ul>
</div>


<form method="get" th:action="@{/books/search}" class="mb-4">
    <div class="row g-2 align-items-center">
        <div class="col">
            <input name="author" class="form-control" placeholder="Author"/>
        </div>
        <div class="col">
            <label for="publicationYearFrom" class="form-label visually-hidden">Rok od</label>
            <input type="number" class="form-control" id="publicationYearFrom" name="publicationYearFrom" placeholder="Rok od"/>
        </div>
        <div class="col">
            <label for="publicationYearTo" class="form-label visually-hidden">Rok do</label>
            <input type="number" class="form-control" id="publicationYearTo" name="publicationYearTo" placeholder="Rok do"/>
        </div>
        <div class="col-auto">
            <button class="btn btn-primary">Search</button>
        </div>
    </div>
</form>

<table class="table table-bordered">
    <thead><tr><th>TytuÅ‚</th><th>Autor</th><th>Rok</th><th>Akcje</th></tr></thead>
    <tbody>
    <tr th:each="book : ${books}">
        <td th:text="${book.title}"></td>
        <td th:text="${book.author}"></td>
        <td th:text="${book.publicationYear}"></td>
        <td>
            <form th:action="@{'/books/delete/' + ${book.id}}" method="post">
                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

</body>
</html>
